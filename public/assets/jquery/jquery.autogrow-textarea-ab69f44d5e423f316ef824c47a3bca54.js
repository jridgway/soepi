(function(a){a.fn.autogrow=function(b){return this.filter("textarea").each(function(){var b=a(this),c=b.height(),d=b.css("lineHeight"),e=a("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:a(this).width(),fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),lineHeight:b.css("lineHeight"),resize:"none"}).appendTo(document.body),f=function(){var b=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n/g,"<br/>");e.html(b),a(this).css("height",Math.max(e.height()+20,c))};a(this).change(f).keyup(f).keydown(f),f.apply(this)}),this}})(jQuery)